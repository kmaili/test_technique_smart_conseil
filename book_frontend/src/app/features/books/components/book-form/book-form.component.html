<div class="book-form">
  <h2>{{ isEditing ? 'Edit Book' : 'Add New Book' }}</h2>
  <form [formGroup]="bookForm" (ngSubmit)="onSubmit()">
    <div>
      <label for="title">Title:</label>
      <input id="title" formControlName="title" required>
      <div *ngIf="f['title'].touched && f['title'].invalid" class="error">
        <span *ngIf="f['title'].errors?.['required']">Title is required.</span>
        <span *ngIf="f['title'].errors?.['minlength']">Title must be at least 2 characters.</span>
        <span *ngIf="f['title'].errors?.['maxlength']">Title cannot exceed 100 characters.</span>
        <span *ngIf="f['title'].errors?.['specialChars']">Title cannot contain special characters.</span>
      </div>
    </div>
    <div>
      <label for="author">Author:</label>
      <input id="author" formControlName="author" required>
      <div *ngIf="f['author'].touched && f['author'].invalid" class="error">
        <span *ngIf="f['author'].errors?.['required']">Author is required.</span>
        <span *ngIf="f['author'].errors?.['minlength']">Author must be at least 2 characters.</span>
        <span *ngIf="f['author'].errors?.['maxlength']">Author cannot exceed 50 characters.</span>
        <span *ngIf="f['author'].errors?.['specialChars']">Author cannot contain special characters.</span>
      </div>
    </div>
    <div>
      <label for="year">Year:</label>
      <input id="year" type="number" formControlName="year" required>
      <div *ngIf="f['year'].touched && f['year'].invalid" class="error">
        <span *ngIf="f['year'].errors?.['required']">Year is required.</span>
        <span *ngIf="f['year'].errors?.['min']">Year must be at least 1000.</span>
        <span *ngIf="f['year'].errors?.['max']">Year cannot exceed {{ currentYear }}.</span>
        <span *ngIf="f['year'].errors?.['pattern']">Year must be a 4-digit number.</span>
      </div>
    </div>
    <button type="submit" [disabled]="bookForm.invalid">Save</button>
    <button type="button" (click)="onCancel()">Cancel</button>
  </form>
</div>